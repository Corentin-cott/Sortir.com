{% extends 'base.html.twig' %}

{% block title %}Détails de la sortie{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/afficher-sortie.css') }}">
{% endblock %}

{% block body %}
    <div class="page-wrap">
        <header class="page-header">
            <h1>Détails de la sortie</h1>
        </header>

        <main class="page-main">
            <section class="cards-row">
                <!-- Infos sortie (left column on desktop) -->
                <article class="card card--left">
                    <h2 class="card-title">Informations</h2>

                    <div class="info-list">
                        <div class="info-line">
                            <div class="label">Nom</div>
                            <div class="value">{{ sortie.nom }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Date et heure de début</div>
                            <div class="value">{{ sortie.dateHeureDebut|date('d/m/Y H:i') }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Date limite d'inscription</div>
                            <div class="value">{{ sortie.dateLimiteInscription|date('d/m/Y') }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Nombre de places</div>
                            <div class="value">{{ sortie.nbInscriptionMax }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Durée (minutes)</div>
                            <div class="value">{{ sortie.duree }}</div>
                        </div>

                        <div class="info-line info-line--long">
                            <div class="label">Description</div>
                            <div class="value">{{ sortie.descriptionInfos }}</div>
                        </div>
                    </div>
                </article>

                <!-- Infos lieu (right column on desktop) -->
                <aside class="card card--right">
                    <h2 class="card-title">Lieu</h2>

                    <div class="info-list">
                        <div class="info-line">
                            <div class="label">Nom</div>
                            <div class="value">{{ sortie.lieu.nom }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Rue</div>
                            <div class="value">{{ sortie.lieu.rue }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Ville</div>
                            <div class="value">{{ sortie.lieu.ville.nom }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Code postal</div>
                            <div class="value">{{ sortie.lieu.ville.codePostal }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Latitude</div>
                            <div class="value">{{ sortie.lieu.latitude }}</div>
                        </div>

                        <div class="info-line">
                            <div class="label">Longitude</div>
                            <div class="value">{{ sortie.lieu.longitude }}</div>
                        </div>
                    </div>
                </aside>
            </section>

            <!-- Participants (bottom left ~20% on desktop, full-width on mobile) -->
            {% if sortie.participants.count() > 0 %}
                <section class="participants-wrap">
                    <h3 class="participants-title">Participants inscrits ({{ sortie.participants.count() }})</h3>

                    <div class="participants-table">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>Pseudo</th>
                                <th>Nom</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for participant in sortie.participants %}
                                <tr>
                                    <td>{{ participant.pseudo }}</td>
                                    <td>{{ participant.prenom }} {{ participant.nom }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </section>
            {% endif %}

            <div class="actions">
                <a class="btn btn--secondary" href="/">Retour</a>
            </div>
        </main>
    </div>
{% endblock %}
